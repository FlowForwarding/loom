<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<title> Tapestry </title>
  	    <link rel="stylesheet" href="static/libs/foundation/normalize.css" />
  	    <link rel="stylesheet" href="static/libs/foundation/foundation.min.css"> 
        <link rel="stylesheet" href="static/foundation.overrides.css"> 
		<link rel="stylesheet" href="static/libs/jquery/jquery-ui-1.10.3.custom.min.css">
		<link rel="stylesheet" href="static/libs/font-awesome/css/font-awesome.min.css" >
		
		<script src='static/libs/google/google.jsapi.js'></script>
		<script src='static/libs/google/google.corechart.min.js'></script>
		<script src='static/libs/jquery/jquery-1.9.1.js'></script>
		<script src="static/libs/jquery/jquery-ui-1.10.3.custom.min.js"></script>
	</head>
	<body>
		<nav class="top-bar">
			<ul class="title-area">
				<li class="name">
					<h4>Tapestry for Infoblox Network</h4>
				</li>
			</ul>
		</nav>
		<div class="row">
			<div class="large-1 small-1 columns">&nbsp;</div>
	  		  <div class="large-8 small-7 columns">&nbsp;
	  			  <div id="visualization" class="nci-chart"></div>
	  		  </div>
			  <div class="large-2 small-3 columns">
				  <br><br>
					  <h2>453 <small> NCI </small></h2>
				  	  <h3>53.233 <small> endpoints </small></h3>
					  <h3>11.2M <small> queries </small></h3>
					  <h3>11.456 <small> qps </small></h3>
			  </div>
			  <div class="large-1 small-1 columns"></div>
		</div>
		<div class="row">
			<div class="large-1 small-2 columns">&nbsp;</div>
			<div class="large-3 small-5 columns">
				<h3 id="periodLabel"> <small> data for last </small> 1 mins</h3>
			</div>
			<div class="large-2 small-5 columns">				
				<form id="frequencyDropdown" class="custom">
				  <label for="customDropdown">Updates every</label>
				  <select id="customDropdown">
				    <option>2 sec</option>
				    <option>3 sec</option>
				    <option>5 sec</option>
					<option>8 sec</option>
					<option>13 sec</option>
				  </select>
				</form></div>
			<div class="large-6  small-10 columns">
				<br>
			<div id="slider"></div>
			</div>
		</div>
		
		<div id="nciSettingsPanel"  class="settings-panel">
		    <form class="custom" style="padding-top:10px;">	
				<div class="row">
					<div class="alert-box alert" style="margin:10;">
						Error happened
				  	  	<a class="close">&times;</a>
					</div>
				</div>
		    	<div class="row">
					<div class="small-12 columns">
						<label>collector</label>
						<input id="collectorInput" type="text" placeholder="nci.infoblox.com">
					</div>
				</div>
				<div class="row">
					<div class="small-12 columns">
						<label for="authOption">
							<input type="checkbox" id="authOption" style="display: none;">
							<span class="custom checkbox"></span> authenticate
						</label>
					</div>
				</div>
				<div class="row">
					<div class="small-12 columns">
						<input type="text" id="usernameInput" placeholder="name">
					</div>
				</div>
				<div class="row">
					<div class="small-12 columns">
						<input type="password" id="passwordInput" placeholder="password">
					</div>
				</div>
				<div class="row">
					<div class="small-12 columns">
						<label for="makeDefault">
							<input type="checkbox" id="makeDefault" style="display: none;">
							<span class="custom checkbox"></span> save as default
						</label>
					</div>
				</div> 
				<div class="row">
					<div class="small-7 columns">&nbsp;</div> 
					<div class="small-3 columns">
						<a class="small button" id="saveSettings">Apply</a>
					</div>
					<div class="small-2 columns">&nbsp;</div> 
				</div> 
			</form>
		</div>
		<div id="nciInfoPanel"  class="panel settings-panel">
			<h4> Helpful Information</h4>
			<span>
				Here we have a lot of significant information about fantastic NCI
			</span>
	    </div>
		<div class="left-menu">
			<ul class="side-nav">
			  <li id="nciSettingsBtn"><i class="icon-cog"></i></li>
			  <li id="nciInfoBtn"><i class="icon-info"></i></img></li>
			</ul>
		</div>

		<script src='static/nci.js'></script>
		<script src='static/libs/foundation/foundation.min.js'></script>  
		<script src='static/chart.js'></script>
		<script type="text/javascript">
		    google.setOnLoadCallback(initChart);
			NCI.initSlider();
			$(function(){
		    	$(document).foundation();
			});
            var connection = new WebSocket("ws://" + location.host + "/clientsock.yaws");
		        connection.onopen = function () {
			    connection.send('START_DATA');
		    };
		 
		    connection.onmessage  = function (e) {
				var data = eval("tmp = " + e.data );
				console.log(data);
				var params = {};
				params.time = new Date(data.Time);
				params.NCI = data.NCI;
				NCI.addValueToChart(params);
		    };
		</script> 
	</body>
</html>